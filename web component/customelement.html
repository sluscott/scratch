<!doctype html>
<html>
<head>
<title>Custom element</title>
</head>
<body>
    <style>
    /* this style is overriden by it's shadow root encapsulation */
    p {
        color: blue;
    }
    </style>
<my-customElement2></my-customElement2>
<p>test paragraph app scope</p>
<script>
    class MyCustomElement extends HTMLElement {
        constructor() {
            super();
            console.log("element constructed");
        }
        connectedCallback() { // called when element is added to the DOM
            console.log("executed when my element is added to the DOM");
        }
        static get observedAttributes() {
            return ["demo"];
        }
        attributeChangedCallback(name, oldValue, newValue) { // use to subscribe to changes on attributes on element instance
            console.log("Attribute changed!", name, oldValue, newValue);
        }
        disconnectedCallback() { // used for teardown
            console.log("My custom element removed from the DOM");
        }
    }
    // registering custom element with the browser
    window.customElements.define("my-customelement", MyCustomElement);

    // extends myCustomElement
    class MyCustomElement2 extends MyCustomElement {
        doMultiplyBy100(n) {
            return n * 100;
        }
    }
    window.customElements.define("my-customelement2", MyCustomElement2);
</script>

<script>
    let $ce = document.createElement("my-customelement");
    let p = document.createElement('p');
    p.innerText = 'My Shadow DOM element';
    p.style.color = 'red';
    setTimeout(() => {
        document.body.appendChild($ce);
        $ce.attachShadow({mode: 'open'});
        $ce.shadowRoot.appendChild(p);
    }, 3000);
</script>
</body>
</html>